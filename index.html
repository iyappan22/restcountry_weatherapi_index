<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

<style>
.bg{
    background-color: rgb(25, 73, 92);
}

img{
    width: 300px;
    height: 200px;
    margin-top: 15px;
    margin-bottom: 20px;
}
.card-header{
background-color: black;
color: white;
text-align: center;
}

.card-body{
     background-image: linear-gradient(to right,rgb(131, 127, 97), rgb(96, 118, 138));
     text-align: center;
     color: white;
     padding: 20px;
    
}
button{
margin-top: 10px;
}

</style>
</head>
<body>
    
    <script>
        var data = fetch("https://restcountries.eu/rest/v2/all");

data
  .then( (response)=> {
    return response.json();
  })
  .then((response)=> {
    restcountries(response)
    console.log(response)
})
  .catch(function (err) {
    console.log(err);
  });

function restcountries(response){
for(i in response){
    createdata(i,response)
}
 
}

var container = document.createElement("div");
container.setAttribute("class", "container bg");

var row = document.createElement("div");
row.setAttribute("class", "row");

function createdata(i,data){

  

var col = document.createElement("div");
col.setAttribute("class", "col-lg-4 card shadow");

var header = document.createElement("div");
header.setAttribute("class", "card-header");
header.innerText = data[i].name;

var body = document.createElement("div");
body.setAttribute("class", "card-body");

var image = document.createElement("img");

image.src = data[i].flag;

var capital = document.createElement("div");

capital.innerText = "Capital :"+" "+ data[i].capital;


var region = document.createElement("div");

region.innerText = "Region :"+" " + data[i].region;

var countrycode = document.createElement("div");

countrycode.innerText ="Country Code :"+" "+ data[i].alpha3Code;

var button =  document.createElement("button");
var weathercountry = data[i].capital;
button.setAttribute("class", "btn btn-primary");
button.innerText = "Click for Weather";
button.addEventListener('click',function(){
    var result = fetch('https://api.openweathermap.org/data/2.5/weather?q='+weathercountry+'&appid=450767ab95b7a0a89f79899717edcde5')

result
.then( (weatherresult)=> {
    return weatherresult.json();
  })
  .then((weatherresult)=> {
    var namecountry =  data[i].name
    var tempvalue = weatherresult['main']['temp']
    var lonvalue = weatherresult['coord']['lon']
    var lanvalue = weatherresult['coord']['lat']
    alert('Name:'+' '+namecountry+'\n'+'Temperature:'+' '+tempvalue+'\n'+'Longitude:'+' '+lonvalue+'\n'+'Latitude:'+' '+lanvalue )
})
  .catch(function (err) {
    alert("err0r")
  });


});

body.append(image, capital, region, countrycode,button);
col.append(header, body );

row.append(col);

container.append(row);

document.body.append(container);


}



    </script>
            



</body>
</html>